# Webpack Dev Server

Right now we're using the --watchflag as our dev tool, but there's another dev tool available when you use webpack. It's an entirely different library called the webpack-dev-server. So, let's get it installed. Yarn add webpack-dev-server --dev. As soon as that's installed, I'm going to go back to my main tab and, instead of running - and first, I'm actually going to clear out the web/bell directory again - and then, instead of running webpack, run webpack-dev-server.

There's two interesting things here. First, it appears to do the same thing as before. We get the same output. But, it says it's running at localhost:8000. This is actually spun off a web server that will return all of these assets. So I want you to copy that URL. But before we look at it, one very important thing to notice is that if you look in your web directory, web/build is empty. When you use the dev-server, it does not physically write files. Instead, it gives you a web server, localhost:8000, and if you go to any URL, any webpack URL on that, it returns the asset to you. It's a different way of solving the problem.

But this one has a couple of interesting advantages. Now, in order to be able to take advantage of this, we're actually going to change all of the assets on our page. Specifically our script tags and our CSS tags to point to that host. So not just /build/layout.js, but localhost:8000/build/layout.js. If you're using Symphony, that's actually pretty easy. If you go up to app - config - config.yml, under the framework key, then assets, set base_url to http://localhost:8080. If you were doing this in a real project, you would probably put that in a config_dev.yml file so it only affects the dev environment.

Now, if you refresh the page, even though there was nothing in the web/build directory, it works perfectly. Instead of our source, our script tags are all pointing to localhost:8000. But, there's actually a problem. If you look at your network tab, you'll see a number of 404s inside of here. The most important one is router.js. Inside the html source, that looks correct. But, remember: router.js is not a file that runs through webpack. That's just a normal, physical file that exists in our file system. And, sure enough, if you open that in a new tab, it doesn't work.

So here's the confusing part about the dev server. If you just go to localhost:8080, it actually looks like it's serving files for our project. Except it's serving them from the root of our project. We really want the webpack-dev-server to know that our web directory is our document root. So, for example, if we go to just localhost:8080/faveicon.ico, that should work. That should make perfect sense and that's an easy fix. The only confusing part is that URLs like /build/login.js work. You don't need /web/build/login.js. So anything [inaudible 00:05:21] your webpack works already with the correct URL, but all of our normal static assets, they're messed up and we need to fix that. How?

In your webpack.config.js file, you can add a new devServer key to configure how the new devServer acts. And the most important one is Contentbase set to ./web. So go over and restart the web server. And when we do that, files like login.js, they still work just like before. But if you just go to localhost:8080, it's building from our web directory, which means static asset files work perfectly. So now when we refresh, things are happy again.

Now, notice that you do see a couple of 404s down here about fontawesome. We're going to talk about that in a second.

So, what has this given us so far? In a second we're going to talk about something called Hot Module Reloading, which is really awesome. But already, thanks to this, whenever you make a change, it's going to automatically reload. Which is kind of cool. So, if I change this 2.5 to 10 and hit save, then quickly switch back, you'll see it actually reload the page automatically for me once it's done compiling. I didn't hit refresh there. That's cool, but really - Hot Module Reloading - that's what makes the devServer awesome.
